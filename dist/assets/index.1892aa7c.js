var T=Object.defineProperty,k=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var Z=(t,u,r)=>u in t?T(t,u,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[u]=r,B=(t,u)=>{for(var r in u||(u={}))L.call(u,r)&&Z(t,r,u[r]);if(f)for(var r of f(u))F.call(u,r)&&Z(t,r,u[r]);return t},b=(t,u)=>k(t,q(u));var x=(t,u)=>{var r={};for(var a in t)L.call(t,a)&&u.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&f)for(var a of f(t))u.indexOf(a)<0&&F.call(t,a)&&(r[a]=t[a]);return r};import{j as S,r as C,a as U,R as H,b as K}from"./vendor.93353617.js";const X=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};X();const e=S.exports.jsx,c=S.exports.jsxs,P=S.exports.Fragment,z=()=>e("div",{className:"card-box",children:c("div",{className:"empty-card","data-testid":"card",children:[e("div",{className:"card-top"}),e("div",{className:"card-middle",children:e("div",{className:"card-middle__chip"})}),e("div",{className:"card-bottom",children:c("div",{className:"card-bottom__info",children:[e("span",{className:"card-text",children:"NAME"}),e("span",{className:"card-text",children:"MM / YY"})]})})]})}),W=({setRoute:t})=>e("div",{className:"card-box",onClick:()=>{t&&t({route:"ADD"})},children:e("div",{className:"empty-card","data-testid":"card",children:"+"})}),G=({type:t,cardData:u})=>{const{cardName:r,cardNumber:a,expired:n,userName:s,alias:i}=u;return c("div",{className:"card-box","data-testid":"card-wrap",children:[c("div",{className:`${t}-card`,"data-testid":"card",children:[e("div",{className:"card-top",children:e("span",{className:"card-text",children:r})}),e("div",{className:"card-middle",children:e("div",{className:"card-middle__chip"})}),c("div",{className:"card-bottom",children:[e("div",{className:"card-bottom__number",children:e("span",{className:"card-text",children:a})}),c("div",{className:"card-bottom__info",children:[e("span",{className:"card-text",children:s}),e("span",{className:"card-text",children:n})]})]})]}),i?e("span",{className:"card-nickname",children:i}):null]})},D=({type:t,cardData:u,setRoute:r})=>t==="new"?e(W,{setRoute:r}):u?e(G,{type:t,cardData:u}):e(z,{}),o={CARD_NUMBER_SIZE:4,MAX_NAME_SIZE:30,MONTH_SIZE:2,YEAR_MIN:22,YEAR_MAX:99,YEAR_SIZE:2,CVC_SIZE:3,PASSWORD_SIZE:1},J=["badInput","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valueMissing"],Q={cardNumber1:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",cardNumber2:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",cardNumber3:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",cardNumber4:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",expiredMonth:"01 - 12 \uC0AC\uC774\uC758 \uB450\uC790\uB9AC \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694.",expiredYear:"22 \uC774\uC0C1 99 \uC774\uD558\uC758 \uB450\uC790\uB9AC \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694.",cvc:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 3\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",pw1:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694.",pw2:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694."},ee=t=>{const{validity:u,name:r}=t;return J.find(n=>u[n])&&Q[r]||""},te=t=>{if([...t.values()].join("").length===0)return null;const{cardName:u,cardNumber1:r,cardNumber2:a,cardNumber3:n,cardNumber4:s,expiredMonth:i,expiredYear:E,userName:v,alias:g}=[...t].reduce((d,[A,y])=>(d[A]=y,d),{}),h=[];[r,a].forEach(d=>{d&&h.push(d)}),[n,s].forEach(d=>{d&&h.push(d.replace(/./g,"*"))});const N=[];return[i,E].forEach(d=>{d&&N.push(d)}),{cardName:u,cardNumber:h.join(" - "),expired:N.join(" / "),userName:v,alias:g}},ae=({children:t})=>{const[u,r]=C.exports.useState(null);return C.exports.useEffect(()=>{const a=document.getElementById("modalRoot");if(!!a)return r(a),a.classList.add("show"),()=>{a.classList.remove("show")}},[]),u?U.exports.createPortal(t,u):null},ue=["\uD074\uB9B0 \uCE74\uB4DC","\uC0BC\uC22D \uCE74\uB4DC","\uC2E0\uD5CC \uCE74\uB4DC","\uCFE1\uBBFC \uCE74\uB4DC","\uD55C\uB098 \uCE74\uB4DC","\uC6B8\uB9AC \uCE74\uB4DC","\uBE55\uC528 \uCE74\uB4DC","\uB18D\uD5D9 \uCE74\uB4DC"],re=({selectCard:t,closeModal:u})=>{const r=a=>()=>t(a);return c(ae,{children:[e("div",{className:"modal-dimmed",onClick:u}),e("div",{className:"modal","data-testid":"select-modal",children:e("div",{className:"flex-center flex-wrap",children:ue.map((a,n)=>c("div",{className:"modal-item-container",onClick:r(a),children:[e("div",{className:"modal-item-dot"}),e("span",{className:"modal-item-name",children:a})]},n))})})]})},V=a=>{var n=a,{name:t,elRef:u}=n,r=x(n,["name","elRef"]);return e("input",b(B({name:t,ref:u,className:"input-basic",type:"text",required:!0,pattern:"^\\d{4}$",minLength:4,maxLength:4},r),{"data-testid":"input-card-number"}))},Y=a=>{var n=a,{name:t,elRef:u}=n,r=x(n,["name","elRef"]);return e("input",b(B({name:t,ref:u,className:"input-basic",type:"password",inputMode:"numeric",minLength:o.CARD_NUMBER_SIZE,maxLength:o.CARD_NUMBER_SIZE,size:o.CARD_NUMBER_SIZE,required:!0,pattern:"^\\d{4}$"},r),{"data-testid":"input-card-number"}))},ne=({elRef:t})=>e("input",{id:"cvc",name:"cvc",ref:t,className:"input-basic w-25",required:!0,minLength:o.CVC_SIZE,maxLength:o.CVC_SIZE,type:"password",pattern:"^\\d{3}$","data-testid":"input-cvc"}),se=({elRef:t})=>e("input",{id:"expiredMonth",name:"expiredMonth",ref:t,className:"input-basic",type:"text",required:!0,placeholder:"MM",pattern:"^(0[1-9]|1[012])$",minLength:o.MONTH_SIZE,maxLength:o.MONTH_SIZE,"data-testid":"input-month"}),ce=({elRef:t})=>e("input",{name:"expiredYear",ref:t,className:"input-basic",type:"text",required:!0,placeholder:"YY",pattern:"^(2[2-9]|[3-9][0-9])$",maxLength:o.YEAR_SIZE,minLength:o.YEAR_SIZE,"data-testid":"input-year"}),ie=({elRef:t})=>e("input",{id:"userName",name:"userName",ref:t,type:"text",defaultValue:"",className:"input-basic",placeholder:"\uCE74\uB4DC\uC5D0 \uD45C\uC2DC\uB41C \uC774\uB984\uACFC \uB3D9\uC77C\uD558\uAC8C \uC785\uB825\uD558\uC138\uC694.",maxLength:o.MAX_NAME_SIZE,"data-testid":"input-user-name"}),O=a=>{var n=a,{name:t,elRef:u}=n,r=x(n,["name","elRef"]);return e("input",b(B({name:t,ref:u,className:"input-basic w-15",required:!0,minLength:o.PASSWORD_SIZE,maxLength:o.PASSWORD_SIZE,type:"password",pattern:"^\\d{1}$"},r),{"data-testid":"input-password"}))},de=10,$=Array.from({length:de}),le=({saveCard:t,setCardData:u})=>{const r=C.exports.useMemo(()=>new Map,[]),a=$.map(()=>C.exports.createRef()),n=C.exports.useRef(null),[s,i]=C.exports.useState($.map(()=>!1)),[E,v]=C.exports.useState(!1),[g,h]=C.exports.useState(0),N=(p,l)=>{r.set(p,l);const m=te(r);m&&u(m)},d=p=>{a.forEach(l=>{l.current&&(l.current.disabled=p)}),v(p)},A=p=>{var _;const l=p.target;if(!(l instanceof HTMLInputElement))return;N(l.name,l.value);const m=a.findIndex(I=>I.current===l),j=ee(l);l.setCustomValidity(j);const M=l.reportValidity();if(i(I=>{const w=[...I];return w[m]=M,w}),!M)return;if(m===1){d(!0);return}if(m===8&&n.current){n.current.focus();return}m===9&&h(l.value.length);const R=(_=a[m+1])==null?void 0:_.current;R&&R.focus()},y=p=>{N("cardName",p),d(!1);const l=a[1].current,m=a[2].current;l&&m&&m.focus()};return c("form",{onSubmit:t,onChange:A,children:[c("div",{className:"input-container",children:[e("label",{htmlFor:"cardNumber1",className:"input-title",children:"\uCE74\uB4DC \uBC88\uD638"}),c("div",{className:"input-box",children:[e(V,{name:"cardNumber1",elRef:a[0],autoFocus:!0}),s[0]?" - ":"",e(V,{name:"cardNumber2",elRef:a[1]}),s[1]?" - ":"",e(Y,{name:"cardNumber3",elRef:a[2]}),s[2]?" - ":"",e(Y,{name:"cardNumber4",elRef:a[3]})]})]}),c("div",{className:"input-container",children:[e("label",{htmlFor:"expiredMonth",className:"input-title",children:"\uB9CC\uB8CC\uC77C"}),c("div",{className:"input-box w-50",children:[e(se,{elRef:a[4]}),s[4]?" / ":"",e(ce,{elRef:a[5]})]})]}),c("div",{className:"input-container",children:[c("label",{htmlFor:"userName",className:"input-title",children:["\uCE74\uB4DC \uC18C\uC720\uC790 \uC774\uB984(\uC120\uD0DD) ",g," / ",o.MAX_NAME_SIZE]}),e(ie,{elRef:a[9]})]}),c("div",{className:"input-container",children:[e("label",{htmlFor:"cvc",className:"input-title",children:"\uBCF4\uC548\uCF54\uB4DC(CVC/CVV)"}),e(ne,{elRef:a[6]})]}),c("div",{className:"input-container",children:[e("label",{htmlFor:"pw1",className:"input-title",children:"\uCE74\uB4DC \uBE44\uBC00\uBC88\uD638"}),e(O,{id:"pw1",name:"pw1",elRef:a[7]}),e(O,{name:"pw2",elRef:a[8]}),e("input",{className:"input-basic w-15",disabled:!0,value:"*",type:"password"}),e("input",{className:"input-basic w-15",disabled:!0,value:"*",type:"password"})]}),e("div",{className:"button-box",children:e("button",{type:"submit",className:"button",ref:n,children:"\uB2E4\uC74C"})}),E?e(re,{selectCard:y,closeModal:()=>d(!1)}):null]})},oe=({setCards:t,setRoute:u})=>{const[r,a]=C.exports.useState(null);return e(P,{children:c("div",{className:"page-container",children:[c("h2",{className:"page-title",children:[e("button",{className:"button",onClick:()=>{u({route:"LIST"})},children:"<"})," ","\uCE74\uB4DC \uCD94\uAC00"]}),e(D,{type:"small",cardData:r}),e(le,{saveCard:()=>{t(i=>(r&&i.add(r),i)),u({route:"ALIAS",payload:{cardData:r}})},setCardData:a})]})})},Ce=({cards:t,setRoute:u})=>c("div",{className:"page-container flex-column-center",children:[e("div",{className:"flex-center",children:e("h2",{className:"page-title mb-10",children:"\uBCF4\uC720 \uCE74\uB4DC"})}),[...t].map((r,a)=>e(D,{type:"small",cardData:r},a)),e(D,{type:"new",cardData:null,setRoute:u})]}),me=({setRoute:t,setCards:u,payload:{cardData:r}})=>{const a=C.exports.useRef(null);return c("div",{className:"page-container flex-column-center",children:[e("div",{className:"flex-center",children:e("h2",{className:"page-title mb-10",children:"\uCE74\uB4DC\uB4F1\uB85D\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."})}),e(D,{type:"big",cardData:r}),c("form",{onSubmit:s=>{s.preventDefault(),a.current&&r&&(r.alias=a.current.value),u(i=>(i.add(r),i)),t({route:"LIST"})},children:[e("div",{className:"input-container flex-center w-100",children:e("input",{ref:a,className:"input-underline w-75",type:"text",placeholder:"\uCE74\uB4DC\uC758 \uBCC4\uCE6D\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694."})}),e("div",{className:"button-box mt-50",children:e("button",{type:"submit",className:"button",children:"\uB2E4\uC74C"})})]})]})},pe={ADD:oe,ALIAS:me,LIST:Ce},he=()=>{const[{route:t,payload:u},r]=C.exports.useState({route:"ADD"}),[a,n]=C.exports.useState(new Set),s=pe[t];return c(P,{children:[e(s,{setRoute:r,cards:a,setCards:n,payload:u}),e("div",{id:"modalRoot"})]})};H.render(e(K.StrictMode,{children:e(he,{})}),document.getElementById("root"));
