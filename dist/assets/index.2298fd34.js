var G=Object.defineProperty;var M=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var q=(u,t,r)=>t in u?G(u,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[t]=r,v=(u,t)=>{for(var r in t||(t={}))O.call(t,r)&&q(u,r,t[r]);if(M)for(var r of M(t))Y.call(t,r)&&q(u,r,t[r]);return u};var R=(u,t)=>{var r={};for(var n in u)O.call(u,n)&&t.indexOf(n)<0&&(r[n]=u[n]);if(u!=null&&M)for(var n of M(u))t.indexOf(n)<0&&Y.call(u,n)&&(r[n]=u[n]);return r};import{j as w,r as o,a as J,R as Q,b as ee}from"./vendor.93353617.js";const te=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}};te();const e=w.exports.jsx,c=w.exports.jsxs,K=w.exports.Fragment,j=o.exports.createContext({cards:[],editingCard:null,setCards:()=>{},setEditingCard:()=>{}}),A=()=>o.exports.useContext(j),ue=({initialState:u,children:t})=>{const[r,n]=o.exports.useState((u==null?void 0:u.cards)||[]),[a,s]=o.exports.useState((u==null?void 0:u.editingCard)||null),d=o.exports.useMemo(()=>({cards:r,editingCard:a,setCards:n,setEditingCard:s}),[a,r]);return e(j.Provider,{value:d,children:t})},ne=()=>{const{setRoute:u}=g();return e("div",{className:"card-box",onClick:()=>{u("ADD")},children:e("div",{className:"empty-card","data-testid":"card",children:"+"})})},S=({type:u="empty",cardData:t,onClick:r})=>{if(u==="new")return e(ne,{});const n=t?u:"empty",{cardName:a,cardNumber:s,expired:d,userName:C,alias:p}=t||{};return c("div",{className:"card-box","data-testid":"card-wrap",onClick:r,children:[c("div",{className:`${n}-card`,"data-testid":"card",children:[e("div",{className:"card-top",children:a&&e("span",{className:"card-text",children:a})}),e("div",{className:"card-middle",children:e("div",{className:"card-middle__chip"})}),c("div",{className:"card-bottom",children:[s&&e("div",{className:"card-bottom__number",children:e("span",{className:"card-text",children:s})}),c("div",{className:"card-bottom__info",children:[e("span",{className:"card-text",children:C||"NAME"}),e("span",{className:"card-text",children:d||"MM / YY"})]})]})]}),p&&e("span",{className:"card-nickname",children:p})]})},l={CARD_NUMBER_SIZE:4,MAX_NAME_SIZE:30,MONTH_SIZE:2,YEAR_MIN:22,YEAR_MAX:99,YEAR_SIZE:2,CVC_SIZE:3,PASSWORD_SIZE:1},ae=["badInput","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valueMissing"],re={cardNumber1:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",cardNumber2:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",cardNumber3:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",cardNumber4:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",expiredMonth:"01 - 12 \uC0AC\uC774\uC758 \uB450\uC790\uB9AC \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694.",expiredYear:"22 \uC774\uC0C1 99 \uC774\uD558\uC758 \uB450\uC790\uB9AC \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694.",cvc:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 3\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",pw1:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694.",pw2:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694."},se=u=>{const{validity:t,name:r}=u;return ae.find(a=>t[a])&&re[r]||""},T=u=>{if([...u.values()].join("").length===0)return null;const{cardName:t,cardNumber1:r,cardNumber2:n,cardNumber3:a,cardNumber4:s,expiredMonth:d,expiredYear:C,userName:p,alias:E}=[...u].reduce((m,[h,B])=>(m[h]=B,m),{}),x=[];[r,n].forEach(m=>{m&&x.push(m)}),[a,s].forEach(m=>{m&&x.push(m.replace(/./g,"*"))});const b=[];return[d,C].forEach(m=>{m&&b.push(m)}),{cardName:t,cardNumber:x.join(" - "),expired:b.join(" / "),userName:p,alias:E}},ce=({children:u})=>{const[t,r]=o.exports.useState(null);return o.exports.useEffect(()=>{const n=document.getElementById("modalRoot");if(!!n)return r(n),n.classList.add("show"),()=>{n.classList.remove("show")}},[]),t?J.exports.createPortal(u,t):null},oe=["\uD074\uB9B0 \uCE74\uB4DC","\uC0BC\uC22D \uCE74\uB4DC","\uC2E0\uD5CC \uCE74\uB4DC","\uCFE1\uBBFC \uCE74\uB4DC","\uD55C\uB098 \uCE74\uB4DC","\uC6B8\uB9AC \uCE74\uB4DC","\uBE55\uC528 \uCE74\uB4DC","\uB18D\uD5D9 \uCE74\uB4DC"],de=({selectCard:u,closeModal:t})=>{const r=n=>()=>u(n);return c(ce,{children:[e("div",{className:"modal-dimmed",onClick:t}),e("div",{className:"modal","data-testid":"select-modal",children:e("div",{className:"flex-center flex-wrap",children:oe.map((n,a)=>c("div",{className:"modal-item-container",onClick:r(n),children:[e("div",{className:"modal-item-dot"}),e("span",{className:"modal-item-name",children:n})]},a))})})]})},y=d=>{var C=d,{name:u,size:t,pattern:r,testId:n,elRef:a}=C,s=R(C,["name","size","pattern","testId","elRef"]);return e("input",v({id:u,name:u,ref:a,className:"input-basic",type:"text",pattern:r,minLength:t,maxLength:t,"data-testid":n},s))},ie=()=>"0123456789".split("").sort(()=>.5-Math.random()),le=({handleKeypadDown:u,handleKeypadBack:t})=>{const r=o.exports.useMemo(ie,[]),n=a=>()=>u(a);return e("div",{className:"keypad-modal","data-testid":"keypad-modal",children:c("div",{className:"keypads",children:[r.map((a,s)=>e("button",{className:"item",onClick:n(a),children:a},s)),e("button",{className:"item--back",onClick:t,children:"\u2190"})]})})},I=s=>{var d=s,{name:u,elRef:t,pattern:r,testId:n}=d,a=R(d,["name","elRef","pattern","testId"]);const[C,p]=o.exports.useState(!1),E=(h,B)=>{h.setAttribute("value",B);const _=new Event("input",{bubbles:!0});h.dispatchEvent(_),h.checkValidity()&&p(!1)},x=()=>{t.current.blur(),p(!0)},b=h=>{const B=t.current;E(B,B.value+h)},m=h=>{h.preventDefault();const B=t.current;E(B,B.value.slice(0,-1))};return c("div",{className:"keypad-wrap",children:[e("input",v({id:u,name:u,ref:t,className:"input-basic",type:"password",inputMode:"numeric",onFocus:x,required:!0,pattern:r,"data-testid":n},a)),C&&e(le,{handleKeypadDown:b,handleKeypadBack:m})]})},f=["cardNumber1","cardNumber2","cardNumber3","cardNumber4","expiredMonth","expiredYear","cvc","pw1","pw2","userName"],U=Array.from({length:f.length}),k=(u,t)=>f[u]===t,Ce=()=>{const{setRoute:u}=g(),{setEditingCard:t}=A(),r=o.exports.useMemo(()=>new Map,[]),n=U.map(()=>o.exports.createRef()),a=o.exports.useRef(null),[s,d]=o.exports.useState(U.map(()=>!1)),[C,p]=o.exports.useState(!1),[E,x]=o.exports.useState(0),b=()=>{[1234,1234,1234,1234,12,33,444,5,5,"roy"].forEach((i,D)=>{r.set(n[D].current.name,i+"")}),r.set("cardName","\uD06C\uB9B0\uCE74\uB4DC");const N=T(r);N&&t(N),m()},m=()=>{u("ALIAS")},h=(N,i)=>{r.set(N,i);const D=T(r);D&&t(D)},B=N=>{n.forEach(i=>{i.current&&(i.current.disabled=N)}),p(N)},_=N=>{var V;const i=N.target;if(!(i instanceof HTMLInputElement))return;h(i.name,i.value);const D=n.findIndex(L=>L.current===i),W=se(i);i.setCustomValidity(W);const F=i.reportValidity();if(d(L=>{const $=[...L];return $[D]=F,$}),!F)return;if(k(D,"cardNumber2")){B(!0);return}if(k(D,"pw2")&&a.current){a.current.focus();return}k(D,"userName")&&x(i.value.length);const P=(V=n[D+1])==null?void 0:V.current;P&&P.focus()},Z=()=>{B(!1);const N=n[1].current,i=n[2].current;N&&i&&i.focus()},X=async N=>{h("cardName",N),Z()};return c("form",{onSubmit:m,onChange:_,children:[c("div",{className:"input-container",children:[e("label",{htmlFor:"cardNumber1",className:"input-title",children:"\uCE74\uB4DC \uBC88\uD638"}),c("div",{className:"input-box",children:[e(y,{name:f[0],elRef:n[0],pattern:"^[0-9]{4}$",minLength:l.CARD_NUMBER_SIZE,maxLength:l.CARD_NUMBER_SIZE,testId:"input-card-number",required:!0,autoFocus:!0}),s[0]&&" - ",e(y,{name:f[1],elRef:n[1],pattern:"^[0-9]{4}$",minLength:l.CARD_NUMBER_SIZE,maxLength:l.CARD_NUMBER_SIZE,testId:"input-card-number",required:!0}),s[1]&&" - ",e(I,{name:f[2],elRef:n[2],pattern:"^[0-9]{4}$",minLength:l.CARD_NUMBER_SIZE,maxLength:l.CARD_NUMBER_SIZE,testId:"input-card-number",required:!0}),s[2]&&" - ",e(I,{name:f[3],elRef:n[3],pattern:"^[0-9]{4}$",minLength:l.CARD_NUMBER_SIZE,maxLength:l.CARD_NUMBER_SIZE,testId:"input-card-number",required:!0})]})]}),c("div",{className:"input-container",children:[e("label",{htmlFor:"expiredMonth",className:"input-title",children:"\uB9CC\uB8CC\uC77C"}),c("div",{className:"input-box w-50",children:[e(y,{name:f[4],elRef:n[4],pattern:"^(0[1-9]|1[012])$",minLength:l.MONTH_SIZE,maxLength:l.MONTH_SIZE,testId:"input-month",placeholder:"MM",required:!0}),s[4]&&" / ",e(y,{name:f[5],elRef:n[5],pattern:"^(2[2-9]|[3-9][0-9])$",minLength:l.YEAR_SIZE,maxLength:l.YEAR_SIZE,testId:"input-year",placeholder:"YY",required:!0})]})]}),c("div",{className:"input-container",children:[c("label",{htmlFor:"userName",className:"input-title",children:["\uCE74\uB4DC \uC18C\uC720\uC790 \uC774\uB984(\uC120\uD0DD) ",E," / ",l.MAX_NAME_SIZE]}),e(y,{name:f[9],elRef:n[9],maxLength:l.MAX_NAME_SIZE,testId:"input-user-name",placeholder:"\uCE74\uB4DC\uC5D0 \uD45C\uC2DC\uB41C \uC774\uB984\uACFC \uB3D9\uC77C\uD558\uAC8C \uC785\uB825\uD558\uC138\uC694."})]}),c("div",{className:"input-container",children:[e("label",{htmlFor:"cvc",className:"input-title",children:"\uBCF4\uC548\uCF54\uB4DC(CVC/CVV)"}),e(I,{name:f[6],elRef:n[6],pattern:"^[0-9]{3}$",size:l.CVC_SIZE,testId:"input-cvc",required:!0})]}),c("div",{className:"input-container",children:[e("label",{htmlFor:"pw1",className:"input-title",children:"\uCE74\uB4DC \uBE44\uBC00\uBC88\uD638"}),c("div",{className:"input-box w-50",children:[e(I,{name:f[7],elRef:n[7],pattern:"^[0-9]{1}$",size:l.PASSWORD_SIZE,testId:"input-password",required:!0}),e(I,{name:f[8],elRef:n[8],pattern:"^[0-9]{1}$",size:l.PASSWORD_SIZE,testId:"input-password",required:!0}),e("input",{className:"input-basic",disabled:!0,value:"*",type:"password"}),e("input",{className:"input-basic",disabled:!0,value:"*",type:"password"})]})]}),c("div",{className:"button-box",children:[e("button",{type:"button",className:"button",onClick:b,children:"[\uD14C\uC2A4\uD2B8]_\uD3FC\uCC44\uC6B0\uAE30"}),e("button",{type:"submit",className:"button",ref:a,children:"\uB2E4\uC74C"})]}),C&&e(de,{selectCard:X,closeModal:Z})]})},me=()=>{const{setRoute:u}=g(),{editingCard:t}=A();return e(K,{children:c("div",{className:"page-container",children:[c("h2",{className:"page-title",children:[e("button",{className:"button",onClick:()=>{u("LIST")},children:"<"})," ","\uCE74\uB4DC \uCD94\uAC00"]}),e(S,{type:"small",cardData:t}),e(Ce,{})]})})},pe=()=>{const{setRoute:u}=g(),{editingCard:t,setEditingCard:r,setCards:n}=A(),a=o.exports.useRef(null);return c("div",{className:"page-container flex-column-center",children:[e("div",{className:"flex-center",children:e("h2",{className:"page-title mb-10",children:"\uCE74\uB4DC\uB4F1\uB85D\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."})}),e(S,{type:"big",cardData:t}),c("form",{onSubmit:d=>{d.preventDefault(),!!t&&(n(C=>{const p=C.indexOf(t),E=v({},t);if(E.alias=a.current&&a.current.value||E.cardName,p>-1){const x=[...C];return x.splice(p,1,E),x}return[E,...C]}),r(null),u("LIST"))},children:[e("div",{className:"input-container flex-center w-100",children:e("input",{ref:a,className:"input-underline w-75",type:"text",placeholder:"\uCE74\uB4DC \uBCC4\uCE6D",defaultValue:t==null?void 0:t.alias,maxLength:10,size:10})}),e("div",{className:"button-box mt-50",children:e("button",{type:"submit",className:"button",children:"\uB2E4\uC74C"})})]})]})},he=n=>{var a=n,{cardData:u,type:t}=a,r=R(a,["cardData","type"]);const{setCards:s}=A(),d=()=>{s(C=>C.filter(p=>p!==u))};return c("div",{className:"deletable",children:[e(S,v({type:t,cardData:u},r)),e("button",{type:"button",className:"button",onClick:d,children:"\uC0AD\uC81C"})]})},z=()=>{const{setRoute:u}=g(),{cards:t,setEditingCard:r}=A(),n=a=>()=>{r(a),u("ALIAS")};return c("div",{className:"page-container flex-column-center",children:[e("div",{className:"flex-center",children:e("h2",{className:"page-title mb-10",children:"\uBCF4\uC720 \uCE74\uB4DC"})}),t.map((a,s)=>e(he,{type:"small",cardData:a,onClick:n(a)},s)),e(S,{type:"new",cardData:null})]})},Ne={ADD:me,ALIAS:pe,LIST:z},H=o.exports.createContext({Page:z,setRoute:()=>{}}),g=()=>o.exports.useContext(H),Be=({children:u})=>{const[t,r]=o.exports.useState("LIST"),n=o.exports.useMemo(()=>({Page:Ne[t],setRoute:r}),[t]);return e(H.Provider,{value:n,children:u})},fe=()=>{const{Page:u}=g();return c(K,{children:[e(u,{}),e("div",{id:"modalRoot"})]})};Q.render(e(ee.StrictMode,{children:e(Be,{children:e(ue,{children:e(fe,{})})})}),document.getElementById("root"));
