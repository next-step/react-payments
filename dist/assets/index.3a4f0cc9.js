var T=Object.defineProperty,q=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var V=(t,u,n)=>u in t?T(t,u,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[u]=n,x=(t,u)=>{for(var n in u||(u={}))F.call(u,n)&&V(t,n,u[n]);if(y)for(var n of y(u))k.call(u,n)&&V(t,n,u[n]);return t},g=(t,u)=>q(t,U(u));var D=(t,u)=>{var n={};for(var a in t)F.call(t,a)&&u.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&y)for(var a of y(t))u.indexOf(a)<0&&k.call(t,a)&&(n[a]=t[a]);return n};import{j as I,r as C,a as H,R as W,b as X}from"./vendor.93353617.js";const z=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};z();const e=I.exports.jsx,c=I.exports.jsxs,Z=I.exports.Fragment,G=()=>e("div",{className:"card-box",children:c("div",{className:"empty-card","data-testid":"card",children:[e("div",{className:"card-top"}),e("div",{className:"card-middle",children:e("div",{className:"card-middle__chip"})}),e("div",{className:"card-bottom",children:c("div",{className:"card-bottom__info",children:[e("span",{className:"card-text",children:"NAME"}),e("span",{className:"card-text",children:"MM / YY"})]})})]})}),J=({setRoute:t})=>e("div",{className:"card-box",onClick:()=>{t&&t({route:"ADD"})},children:e("div",{className:"empty-card","data-testid":"card",children:"+"})}),Q=({type:t,cardData:u})=>{const{cardName:n,cardNumber:a,expired:r,userName:s,alias:d}=u;return c("div",{className:"card-box","data-testid":"card-wrap",children:[c("div",{className:`${t}-card`,"data-testid":"card",children:[e("div",{className:"card-top",children:e("span",{className:"card-text",children:n})}),e("div",{className:"card-middle",children:e("div",{className:"card-middle__chip"})}),c("div",{className:"card-bottom",children:[e("div",{className:"card-bottom__number",children:e("span",{className:"card-text",children:a})}),c("div",{className:"card-bottom__info",children:[e("span",{className:"card-text",children:s}),e("span",{className:"card-text",children:r})]})]})]}),d?e("span",{className:"card-nickname",children:d}):null]})},A=({type:t,cardData:u,setRoute:n})=>t==="new"?e(J,{setRoute:n}):u?e(Q,{type:t,cardData:u}):e(G,{}),m={CARD_NUMBER_SIZE:4,MAX_NAME_SIZE:30,MONTH_SIZE:2,YEAR_MIN:22,YEAR_MAX:99,YEAR_SIZE:2,CVC_SIZE:3,PASSWORD_SIZE:1},ee=["badInput","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valueMissing"],te={cardNumber1:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",cardNumber2:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",cardNumber3:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",cardNumber4:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",expiredMonth:"01 - 12 \uC0AC\uC774\uC758 \uB450\uC790\uB9AC \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694.",expiredYear:"22 \uC774\uC0C1 99 \uC774\uD558\uC758 \uB450\uC790\uB9AC \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694.",cvc:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 3\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",pw1:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694.",pw2:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694."},ae=t=>{const{validity:u,name:n}=t;return ee.find(r=>u[r])&&te[n]||""},ue=t=>{if([...t.values()].join("").length===0)return null;const{cardName:u,cardNumber1:n,cardNumber2:a,cardNumber3:r,cardNumber4:s,expiredMonth:d,expiredYear:f,userName:B,alias:b}=[...t].reduce((i,[v,E])=>(i[v]=E,i),{}),N=[];[n,a].forEach(i=>{i&&N.push(i)}),[r,s].forEach(i=>{i&&N.push(i.replace(/./g,"*"))});const o=[];return[d,f].forEach(i=>{i&&o.push(i)}),{cardName:u,cardNumber:N.join(" - "),expired:o.join(" / "),userName:B,alias:b}},ne=({children:t})=>{const[u,n]=C.exports.useState(null);return C.exports.useEffect(()=>{const a=document.getElementById("modalRoot");if(!!a)return n(a),a.classList.add("show"),()=>{a.classList.remove("show")}},[]),u?H.exports.createPortal(t,u):null},re=["\uD074\uB9B0 \uCE74\uB4DC","\uC0BC\uC22D \uCE74\uB4DC","\uC2E0\uD5CC \uCE74\uB4DC","\uCFE1\uBBFC \uCE74\uB4DC","\uD55C\uB098 \uCE74\uB4DC","\uC6B8\uB9AC \uCE74\uB4DC","\uBE55\uC528 \uCE74\uB4DC","\uB18D\uD5D9 \uCE74\uB4DC"],se=({selectCard:t,closeModal:u})=>{const n=a=>()=>t(a);return c(ne,{children:[e("div",{className:"modal-dimmed",onClick:u}),e("div",{className:"modal","data-testid":"select-modal",children:e("div",{className:"flex-center flex-wrap",children:re.map((a,r)=>c("div",{className:"modal-item-container",onClick:n(a),children:[e("div",{className:"modal-item-dot"}),e("span",{className:"modal-item-name",children:a})]},r))})})]})},P=a=>{var r=a,{name:t,elRef:u}=r,n=D(r,["name","elRef"]);return e("input",g(x({name:t,ref:u,className:"input-basic",type:"text",required:!0,pattern:"^\\d{4}$",minLength:4,maxLength:4},n),{"data-testid":"input-card-number"}))},ce=()=>"0123456789".split("").sort(()=>.5-Math.random()),ie=({handleKeypadDown:t,handleKeypadBack:u})=>{const n=C.exports.useMemo(ce,[]),a=r=>()=>t(r);return e("div",{className:"keypad-modal","data-testid":"keypad-modal",children:c("div",{className:"keypads",children:[n.map((r,s)=>e("button",{className:"item",onClick:a(r),children:r},s)),e("button",{className:"item--back",onClick:u,children:"\u2190"})]})})},S=t=>a=>{var r=a,{elRef:u}=r,n=D(r,["elRef"]);const[s,d]=C.exports.useState(!1),f=(o,i)=>{o.setAttribute("value",i);const v=new Event("input",{bubbles:!0});o.dispatchEvent(v),o.checkValidity()&&d(!1)},B=()=>{u.current.blur(),d(!0)},b=o=>{const i=u.current;f(i,i.value+o)},N=o=>{o.preventDefault();const i=u.current;f(i,i.value.slice(0,-1))};return c("div",{className:"keypad-wrap",children:[e(t,x({elRef:u,handleFocus:B},n)),s?e(ie,{handleKeypadDown:b,handleKeypadBack:N}):null]})},de=r=>{var s=r,{name:t,elRef:u,handleFocus:n}=s,a=D(s,["name","elRef","handleFocus"]);return e("input",g(x({name:t,ref:u,className:"input-basic",type:"password",inputMode:"numeric",onFocus:n,minLength:m.CARD_NUMBER_SIZE,maxLength:m.CARD_NUMBER_SIZE,size:m.CARD_NUMBER_SIZE,required:!0,pattern:"^\\d{4}$"},a),{"data-testid":"input-card-number"}))};var $=S(de);const le=({elRef:t,handleFocus:u})=>e("input",{id:"cvc",name:"cvc",ref:t,className:"input-basic",required:!0,onFocus:u,minLength:m.CVC_SIZE,maxLength:m.CVC_SIZE,type:"password",pattern:"^\\d{3}$","data-testid":"input-cvc"});var oe=S(le);const Ce=({elRef:t})=>e("input",{id:"expiredMonth",name:"expiredMonth",ref:t,className:"input-basic",type:"text",required:!0,placeholder:"MM",pattern:"^(0[1-9]|1[012])$",minLength:m.MONTH_SIZE,maxLength:m.MONTH_SIZE,"data-testid":"input-month"}),me=({elRef:t})=>e("input",{name:"expiredYear",ref:t,className:"input-basic",type:"text",required:!0,placeholder:"YY",pattern:"^(2[2-9]|[3-9][0-9])$",maxLength:m.YEAR_SIZE,minLength:m.YEAR_SIZE,"data-testid":"input-year"}),pe=({elRef:t})=>e("input",{id:"userName",name:"userName",ref:t,type:"text",defaultValue:"",className:"input-basic",placeholder:"\uCE74\uB4DC\uC5D0 \uD45C\uC2DC\uB41C \uC774\uB984\uACFC \uB3D9\uC77C\uD558\uAC8C \uC785\uB825\uD558\uC138\uC694.",maxLength:m.MAX_NAME_SIZE,"data-testid":"input-user-name"}),he=r=>{var s=r,{name:t,elRef:u,handleFocus:n}=s,a=D(s,["name","elRef","handleFocus"]);return e("input",g(x({name:t,ref:u,className:"input-basic",required:!0,minLength:m.PASSWORD_SIZE,maxLength:m.PASSWORD_SIZE,onFocus:n,type:"password",pattern:"^\\d{1}$"},a),{"data-testid":"input-password"}))};var Y=S(he);const Ne=10,O=Array.from({length:Ne}),fe=({saveCard:t,setCardData:u})=>{const n=C.exports.useMemo(()=>new Map,[]),a=O.map(()=>C.exports.createRef()),r=C.exports.useRef(null),[s,d]=C.exports.useState(O.map(()=>!1)),[f,B]=C.exports.useState(!1),[b,N]=C.exports.useState(0),o=(p,l)=>{n.set(p,l);const h=ue(n);h&&u(h)},i=p=>{a.forEach(l=>{l.current&&(l.current.disabled=p)}),B(p)},v=p=>{var R;const l=p.target;if(!(l instanceof HTMLInputElement))return;o(l.name,l.value);const h=a.findIndex(M=>M.current===l),j=ae(l);l.setCustomValidity(j);const _=l.reportValidity();if(d(M=>{const L=[...M];return L[h]=_,L}),!_)return;if(h===1){i(!0);return}if(h===8&&r.current){r.current.focus();return}h===9&&N(l.value.length);const w=(R=a[h+1])==null?void 0:R.current;w&&w.focus()},E=()=>{i(!1);const p=a[1].current,l=a[2].current;p&&l&&l.focus()},K=async p=>{o("cardName",p),E()};return c("form",{onSubmit:t,onChange:v,children:[c("div",{className:"input-container",children:[e("label",{htmlFor:"cardNumber1",className:"input-title",children:"\uCE74\uB4DC \uBC88\uD638"}),c("div",{className:"input-box",children:[e(P,{name:"cardNumber1",elRef:a[0],autoFocus:!0}),s[0]?" - ":"",e(P,{name:"cardNumber2",elRef:a[1]}),s[1]?" - ":"",e($,{name:"cardNumber3",elRef:a[2]}),s[2]?" - ":"",e($,{name:"cardNumber4",elRef:a[3]})]})]}),c("div",{className:"input-container",children:[e("label",{htmlFor:"expiredMonth",className:"input-title",children:"\uB9CC\uB8CC\uC77C"}),c("div",{className:"input-box w-50",children:[e(Ce,{elRef:a[4]}),s[4]?" / ":"",e(me,{elRef:a[5]})]})]}),c("div",{className:"input-container",children:[c("label",{htmlFor:"userName",className:"input-title",children:["\uCE74\uB4DC \uC18C\uC720\uC790 \uC774\uB984(\uC120\uD0DD) ",b," / ",m.MAX_NAME_SIZE]}),e(pe,{elRef:a[9]})]}),c("div",{className:"input-container",children:[e("label",{htmlFor:"cvc",className:"input-title",children:"\uBCF4\uC548\uCF54\uB4DC(CVC/CVV)"}),e(oe,{name:"cvc",elRef:a[6]})]}),c("div",{className:"input-container",children:[e("label",{htmlFor:"pw1",className:"input-title",children:"\uCE74\uB4DC \uBE44\uBC00\uBC88\uD638"}),c("div",{className:"input-box w-50",children:[e(Y,{id:"pw1",name:"pw1",elRef:a[7]}),e(Y,{name:"pw2",elRef:a[8]}),e("input",{className:"input-basic",disabled:!0,value:"*",type:"password"}),e("input",{className:"input-basic",disabled:!0,value:"*",type:"password"})]})]}),e("div",{className:"button-box",children:e("button",{type:"submit",className:"button",ref:r,children:"\uB2E4\uC74C"})}),f?e(se,{selectCard:K,closeModal:E}):null]})},Be=({setCards:t,setRoute:u})=>{const[n,a]=C.exports.useState(null);return e(Z,{children:c("div",{className:"page-container",children:[c("h2",{className:"page-title",children:[e("button",{className:"button",onClick:()=>{u({route:"LIST"})},children:"<"})," ","\uCE74\uB4DC \uCD94\uAC00"]}),e(A,{type:"small",cardData:n}),e(fe,{saveCard:()=>{t(d=>(n&&d.add(n),d)),u({route:"ALIAS",payload:{cardData:n}})},setCardData:a})]})})},be=({cards:t,setRoute:u})=>c("div",{className:"page-container flex-column-center",children:[e("div",{className:"flex-center",children:e("h2",{className:"page-title mb-10",children:"\uBCF4\uC720 \uCE74\uB4DC"})}),[...t].map((n,a)=>e(A,{type:"small",cardData:n},a)),e(A,{type:"new",cardData:null,setRoute:u})]}),ve=({setRoute:t,setCards:u,payload:{cardData:n}})=>{const a=C.exports.useRef(null);return c("div",{className:"page-container flex-column-center",children:[e("div",{className:"flex-center",children:e("h2",{className:"page-title mb-10",children:"\uCE74\uB4DC\uB4F1\uB85D\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."})}),e(A,{type:"big",cardData:n}),c("form",{onSubmit:s=>{s.preventDefault(),a.current&&n&&(n.alias=a.current.value),u(d=>(d.add(n),d)),t({route:"LIST"})},children:[e("div",{className:"input-container flex-center w-100",children:e("input",{ref:a,className:"input-underline w-75",type:"text",placeholder:"\uCE74\uB4DC\uC758 \uBCC4\uCE6D\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694."})}),e("div",{className:"button-box mt-50",children:e("button",{type:"submit",className:"button",children:"\uB2E4\uC74C"})})]})]})},xe={ADD:Be,ALIAS:ve,LIST:be},De=()=>{const[{route:t,payload:u},n]=C.exports.useState({route:"ADD"}),[a,r]=C.exports.useState(new Set),s=xe[t];return c(Z,{children:[e(s,{setRoute:n,cards:a,setCards:r,payload:u}),e("div",{id:"modalRoot"})]})};W.render(e(X.StrictMode,{children:e(De,{})}),document.getElementById("root"));
