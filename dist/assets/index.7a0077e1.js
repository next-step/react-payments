var j=Object.defineProperty;var A=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var $=(a,u,n)=>u in a?j(a,u,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[u]=n,S=(a,u)=>{for(var n in u||(u={}))V.call(u,n)&&$(a,n,u[n]);if(A)for(var n of A(u))P.call(u,n)&&$(a,n,u[n]);return a};var R=(a,u)=>{var n={};for(var t in a)V.call(a,t)&&u.indexOf(t)<0&&(n[t]=a[t]);if(a!=null&&A)for(var t of A(a))u.indexOf(t)<0&&P.call(a,t)&&(n[t]=a[t]);return n};import{j as _,r as C,a as K,R as U,b as T}from"./vendor.93353617.js";const z=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};z();const e=_.exports.jsx,c=_.exports.jsxs,O=_.exports.Fragment,H=({setRoute:a})=>e("div",{className:"card-box",onClick:()=>{a&&a({route:"ADD"})},children:e("div",{className:"empty-card","data-testid":"card",children:"+"})}),y=({type:a="empty",cardData:u,setRoute:n})=>{if(a==="new")return e(H,{setRoute:n});const t=u?a:"empty",{cardName:r,cardNumber:s,expired:i,userName:N,alias:f}=u||{};return c("div",{className:"card-box","data-testid":"card-wrap",children:[c("div",{className:`${t}-card`,"data-testid":"card",children:[e("div",{className:"card-top",children:r&&e("span",{className:"card-text",children:r})}),e("div",{className:"card-middle",children:e("div",{className:"card-middle__chip"})}),c("div",{className:"card-bottom",children:[s&&e("div",{className:"card-bottom__number",children:e("span",{className:"card-text",children:s})}),c("div",{className:"card-bottom__info",children:[e("span",{className:"card-text",children:N||"NAME"}),e("span",{className:"card-text",children:i||"MM / YY"})]})]})]}),f&&e("span",{className:"card-nickname",children:f})]})},d={CARD_NUMBER_SIZE:4,MAX_NAME_SIZE:30,MONTH_SIZE:2,YEAR_MIN:22,YEAR_MAX:99,YEAR_SIZE:2,CVC_SIZE:3,PASSWORD_SIZE:1},X=["badInput","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valueMissing"],W={cardNumber1:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",cardNumber2:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",cardNumber3:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",cardNumber4:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 4\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",expiredMonth:"01 - 12 \uC0AC\uC774\uC758 \uB450\uC790\uB9AC \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694.",expiredYear:"22 \uC774\uC0C1 99 \uC774\uD558\uC758 \uB450\uC790\uB9AC \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694.",cvc:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790 3\uAC1C\uB97C \uC785\uB825\uD558\uC138\uC694.",pw1:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694.",pw2:"0 - 9 \uC0AC\uC774\uC758 \uC22B\uC790\uB97C \uC785\uB825\uD558\uC138\uC694."},G=a=>{const{validity:u,name:n}=a;return X.find(r=>u[r])&&W[n]||""},J=a=>{if([...a.values()].join("").length===0)return null;const{cardName:u,cardNumber1:n,cardNumber2:t,cardNumber3:r,cardNumber4:s,expiredMonth:i,expiredYear:N,userName:f,alias:x}=[...a].reduce((l,[m,p])=>(l[m]=p,l),{}),D=[];[n,t].forEach(l=>{l&&D.push(l)}),[r,s].forEach(l=>{l&&D.push(l.replace(/./g,"*"))});const b=[];return[i,N].forEach(l=>{l&&b.push(l)}),{cardName:u,cardNumber:D.join(" - "),expired:b.join(" / "),userName:f,alias:x}},Q=({children:a})=>{const[u,n]=C.exports.useState(null);return C.exports.useEffect(()=>{const t=document.getElementById("modalRoot");if(!!t)return n(t),t.classList.add("show"),()=>{t.classList.remove("show")}},[]),u?K.exports.createPortal(a,u):null},ee=["\uD074\uB9B0 \uCE74\uB4DC","\uC0BC\uC22D \uCE74\uB4DC","\uC2E0\uD5CC \uCE74\uB4DC","\uCFE1\uBBFC \uCE74\uB4DC","\uD55C\uB098 \uCE74\uB4DC","\uC6B8\uB9AC \uCE74\uB4DC","\uBE55\uC528 \uCE74\uB4DC","\uB18D\uD5D9 \uCE74\uB4DC"],te=({selectCard:a,closeModal:u})=>{const n=t=>()=>a(t);return c(Q,{children:[e("div",{className:"modal-dimmed",onClick:u}),e("div",{className:"modal","data-testid":"select-modal",children:e("div",{className:"flex-center flex-wrap",children:ee.map((t,r)=>c("div",{className:"modal-item-container",onClick:n(t),children:[e("div",{className:"modal-item-dot"}),e("span",{className:"modal-item-name",children:t})]},r))})})]})},v=i=>{var N=i,{name:a,size:u,pattern:n,testId:t,elRef:r}=N,s=R(N,["name","size","pattern","testId","elRef"]);return e("input",S({id:a,name:a,ref:r,className:"input-basic",type:"text",pattern:n,minLength:u,maxLength:u,"data-testid":t},s))},ue=()=>"0123456789".split("").sort(()=>.5-Math.random()),ae=({handleKeypadDown:a,handleKeypadBack:u})=>{const n=C.exports.useMemo(ue,[]),t=r=>()=>a(r);return e("div",{className:"keypad-modal","data-testid":"keypad-modal",children:c("div",{className:"keypads",children:[n.map((r,s)=>e("button",{className:"item",onClick:t(r),children:r},s)),e("button",{className:"item--back",onClick:u,children:"\u2190"})]})})},g=s=>{var i=s,{name:a,elRef:u,pattern:n,testId:t}=i,r=R(i,["name","elRef","pattern","testId"]);const[N,f]=C.exports.useState(!1),x=(m,p)=>{m.setAttribute("value",p);const I=new Event("input",{bubbles:!0});m.dispatchEvent(I),m.checkValidity()&&f(!1)},D=()=>{u.current.blur(),f(!0)},b=m=>{const p=u.current;x(p,p.value+m)},l=m=>{m.preventDefault();const p=u.current;x(p,p.value.slice(0,-1))};return c("div",{className:"keypad-wrap",children:[e("input",S({id:a,name:a,ref:u,className:"input-basic",type:"password",inputMode:"numeric",onFocus:D,required:!0,pattern:n,"data-testid":t},r)),N&&e(ae,{handleKeypadDown:b,handleKeypadBack:l})]})},h=["cardNumber1","cardNumber2","cardNumber3","cardNumber4","expiredMonth","expiredYear","cvc","pw1","pw2","userName"],Y=Array.from({length:h.length}),w=(a,u)=>h[a]===u,ne=({saveCard:a,setCardData:u})=>{const n=C.exports.useMemo(()=>new Map,[]),t=Y.map(()=>C.exports.createRef()),r=C.exports.useRef(null),[s,i]=C.exports.useState(Y.map(()=>!1)),[N,f]=C.exports.useState(!1),[x,D]=C.exports.useState(0),b=(B,o)=>{n.set(B,o);const E=J(n);E&&u(E)},l=B=>{t.forEach(o=>{o.current&&(o.current.disabled=B)}),f(B)},m=B=>{var F;const o=B.target;if(!(o instanceof HTMLInputElement))return;b(o.name,o.value);const E=t.findIndex(M=>M.current===o),q=G(o);o.setCustomValidity(q);const L=o.reportValidity();if(i(M=>{const k=[...M];return k[E]=L,k}),!L)return;if(w(E,"cardNumber2")){l(!0);return}if(w(E,"pw2")&&r.current){r.current.focus();return}w(E,"userName")&&D(o.value.length);const Z=(F=t[E+1])==null?void 0:F.current;Z&&Z.focus()},p=()=>{l(!1);const B=t[1].current,o=t[2].current;B&&o&&o.focus()},I=async B=>{b("cardName",B),p()};return c("form",{onSubmit:a,onChange:m,children:[c("div",{className:"input-container",children:[e("label",{htmlFor:"cardNumber1",className:"input-title",children:"\uCE74\uB4DC \uBC88\uD638"}),c("div",{className:"input-box",children:[e(v,{name:h[0],elRef:t[0],pattern:"^[0-9]{4}$",minLength:d.CARD_NUMBER_SIZE,maxLength:d.CARD_NUMBER_SIZE,testId:"input-card-number",required:!0,autoFocus:!0}),s[0]&&" - ",e(v,{name:h[1],elRef:t[1],pattern:"^[0-9]{4}$",minLength:d.CARD_NUMBER_SIZE,maxLength:d.CARD_NUMBER_SIZE,testId:"input-card-number",required:!0}),s[1]&&" - ",e(g,{name:h[2],elRef:t[2],pattern:"^[0-9]{4}$",minLength:d.CARD_NUMBER_SIZE,maxLength:d.CARD_NUMBER_SIZE,testId:"input-card-number",required:!0}),s[2]&&" - ",e(g,{name:h[3],elRef:t[3],pattern:"^[0-9]{4}$",minLength:d.CARD_NUMBER_SIZE,maxLength:d.CARD_NUMBER_SIZE,testId:"input-card-number",required:!0})]})]}),c("div",{className:"input-container",children:[e("label",{htmlFor:"expiredMonth",className:"input-title",children:"\uB9CC\uB8CC\uC77C"}),c("div",{className:"input-box w-50",children:[e(v,{name:h[4],elRef:t[4],pattern:"^(0[1-9]|1[012])$",minLength:d.MONTH_SIZE,maxLength:d.MONTH_SIZE,testId:"input-month",placeholder:"MM",required:!0}),s[4]&&" / ",e(v,{name:h[5],elRef:t[5],pattern:"^(2[2-9]|[3-9][0-9])$",minLength:d.YEAR_SIZE,maxLength:d.YEAR_SIZE,testId:"input-year",placeholder:"YY",required:!0})]})]}),c("div",{className:"input-container",children:[c("label",{htmlFor:"userName",className:"input-title",children:["\uCE74\uB4DC \uC18C\uC720\uC790 \uC774\uB984(\uC120\uD0DD) ",x," / ",d.MAX_NAME_SIZE]}),e(v,{name:h[9],elRef:t[9],maxLength:d.MAX_NAME_SIZE,testId:"input-user-name",placeholder:"\uCE74\uB4DC\uC5D0 \uD45C\uC2DC\uB41C \uC774\uB984\uACFC \uB3D9\uC77C\uD558\uAC8C \uC785\uB825\uD558\uC138\uC694."})]}),c("div",{className:"input-container",children:[e("label",{htmlFor:"cvc",className:"input-title",children:"\uBCF4\uC548\uCF54\uB4DC(CVC/CVV)"}),e(g,{name:h[6],elRef:t[6],pattern:"^[0-9]{3}$",size:d.CVC_SIZE,testId:"input-cvc",required:!0})]}),c("div",{className:"input-container",children:[e("label",{htmlFor:"pw1",className:"input-title",children:"\uCE74\uB4DC \uBE44\uBC00\uBC88\uD638"}),c("div",{className:"input-box w-50",children:[e(g,{name:h[7],elRef:t[7],pattern:"^[0-9]{1}$",size:d.PASSWORD_SIZE,testId:"input-password",required:!0}),e(g,{name:h[8],elRef:t[8],pattern:"^[0-9]{1}$",size:d.PASSWORD_SIZE,testId:"input-password",required:!0}),e("input",{className:"input-basic",disabled:!0,value:"*",type:"password"}),e("input",{className:"input-basic",disabled:!0,value:"*",type:"password"})]})]}),e("div",{className:"button-box",children:e("button",{type:"submit",className:"button",ref:r,children:"\uB2E4\uC74C"})}),N&&e(te,{selectCard:I,closeModal:p})]})},re=({setCards:a,setRoute:u})=>{const[n,t]=C.exports.useState(null);return e(O,{children:c("div",{className:"page-container",children:[c("h2",{className:"page-title",children:[e("button",{className:"button",onClick:()=>{u({route:"LIST"})},children:"<"})," ","\uCE74\uB4DC \uCD94\uAC00"]}),e(y,{type:"small",cardData:n}),e(ne,{saveCard:()=>{a(i=>(n&&i.add(n),i)),u({route:"ALIAS",payload:{cardData:n}})},setCardData:t})]})})},se=({cards:a,setRoute:u})=>c("div",{className:"page-container flex-column-center",children:[e("div",{className:"flex-center",children:e("h2",{className:"page-title mb-10",children:"\uBCF4\uC720 \uCE74\uB4DC"})}),[...a].map((n,t)=>e(y,{type:"small",cardData:n},t)),e(y,{type:"new",cardData:null,setRoute:u})]}),ce=({setRoute:a,setCards:u,payload:{cardData:n}})=>{const t=C.exports.useRef(null);return c("div",{className:"page-container flex-column-center",children:[e("div",{className:"flex-center",children:e("h2",{className:"page-title mb-10",children:"\uCE74\uB4DC\uB4F1\uB85D\uC774 \uC644\uB8CC\uB418\uC5C8\uC2B5\uB2C8\uB2E4."})}),e(y,{type:"big",cardData:n}),c("form",{onSubmit:s=>{s.preventDefault(),t.current&&n&&(n.alias=t.current.value),u(i=>(i.add(n),i)),a({route:"LIST"})},children:[e("div",{className:"input-container flex-center w-100",children:e("input",{ref:t,className:"input-underline w-75",type:"text",placeholder:"\uCE74\uB4DC\uC758 \uBCC4\uCE6D\uC744 \uC785\uB825\uD574\uC8FC\uC138\uC694."})}),e("div",{className:"button-box mt-50",children:e("button",{type:"submit",className:"button",children:"\uB2E4\uC74C"})})]})]})},ie={ADD:re,ALIAS:ce,LIST:se},de=()=>{const[{route:a,payload:u},n]=C.exports.useState({route:"ADD"}),[t,r]=C.exports.useState(new Set),s=ie[a];return c(O,{children:[e(s,{setRoute:n,cards:t,setCards:r,payload:u}),e("div",{id:"modalRoot"})]})};U.render(e(T.StrictMode,{children:e(de,{})}),document.getElementById("root"));
